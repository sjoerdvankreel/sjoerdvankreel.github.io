<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>XT-Audio: Callbacks.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XT-Audio
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_8cd6fdf25da9fd0b4af649d126796ee4.html">src</a></li><li class="navelem"><a class="el" href="dir_76eff0fd782112579d6390a3416d131b.html">core</a></li><li class="navelem"><a class="el" href="dir_0172c19cb5accaf91b64f3947f709470.html">xt</a></li><li class="navelem"><a class="el" href="dir_fcacb0b2fbd3af3e65affcd4fcea1f9b.html">xt</a></li><li class="navelem"><a class="el" href="dir_584522209cbefc56a0d3676aa757bffa.html">api</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">Callbacks.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Callback function types.  
<a href="#details">More...</a></p>

<p><a href="_callbacks_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a42be5027944d8cafe4dfa81ef804f8c6"><td class="memItemLeft" align="right" valign="top">typedef void(<a class="el" href="_shared_8h.html#acbfdf8f1ec3780bdd662ebbbb213998e">XT_CALLBACK</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_callbacks_8h.html#a42be5027944d8cafe4dfa81ef804f8c6">XtOnError</a>) (char const *message)</td></tr>
<tr class="memdesc:a42be5027944d8cafe4dfa81ef804f8c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error logging callback.  <a href="#a42be5027944d8cafe4dfa81ef804f8c6">More...</a><br /></td></tr>
<tr class="separator:a42be5027944d8cafe4dfa81ef804f8c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf92c83061232782c96cb174cc6d371d"><td class="memItemLeft" align="right" valign="top">typedef void(<a class="el" href="_shared_8h.html#acbfdf8f1ec3780bdd662ebbbb213998e">XT_CALLBACK</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_callbacks_8h.html#abf92c83061232782c96cb174cc6d371d">XtOnXRun</a>) (<a class="el" href="_shared_8h.html#a97e22e376753e79f83b1762628476d06">XtStream</a> const *stream, int32_t index, void *user)</td></tr>
<tr class="memdesc:abf92c83061232782c96cb174cc6d371d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio xrun (underrun/overrun) callback.  <a href="#abf92c83061232782c96cb174cc6d371d">More...</a><br /></td></tr>
<tr class="separator:abf92c83061232782c96cb174cc6d371d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5812fb7a07d222587f2f51fa32ce2e07"><td class="memItemLeft" align="right" valign="top">typedef uint32_t(<a class="el" href="_shared_8h.html#acbfdf8f1ec3780bdd662ebbbb213998e">XT_CALLBACK</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_callbacks_8h.html#a5812fb7a07d222587f2f51fa32ce2e07">XtOnBuffer</a>) (<a class="el" href="_shared_8h.html#a97e22e376753e79f83b1762628476d06">XtStream</a> const *stream, <a class="el" href="struct_xt_buffer.html">XtBuffer</a> const *buffer, void *user)</td></tr>
<tr class="memdesc:a5812fb7a07d222587f2f51fa32ce2e07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio stream processing callback.  <a href="#a5812fb7a07d222587f2f51fa32ce2e07">More...</a><br /></td></tr>
<tr class="separator:a5812fb7a07d222587f2f51fa32ce2e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ce06062300b5254c3d6960088a8f0d"><td class="memItemLeft" align="right" valign="top">typedef void(<a class="el" href="_shared_8h.html#acbfdf8f1ec3780bdd662ebbbb213998e">XT_CALLBACK</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_callbacks_8h.html#af5ce06062300b5254c3d6960088a8f0d">XtOnRunning</a>) (<a class="el" href="_shared_8h.html#a97e22e376753e79f83b1762628476d06">XtStream</a> const *stream, <a class="el" href="_shared_8h.html#a5ed28f2b663eb8722ae2dd4b7d8739b6">XtBool</a> running, <a class="el" href="_shared_8h.html#a4ae237bc463dfed7b5148dd0e9fa4c3c">XtError</a> error, void *user)</td></tr>
<tr class="memdesc:af5ce06062300b5254c3d6960088a8f0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Audio stream state changed callback.  <a href="#af5ce06062300b5254c3d6960088a8f0d">More...</a><br /></td></tr>
<tr class="separator:af5ce06062300b5254c3d6960088a8f0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Callback function types. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a5812fb7a07d222587f2f51fa32ce2e07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t(* XtOnBuffer)(<a class="el" href="_shared_8h.html#a97e22e376753e79f83b1762628476d06">XtStream</a> const *stream, <a class="el" href="struct_xt_buffer.html">XtBuffer</a> const *buffer, void *user)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Audio stream processing callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The audio stream. May be used to query buffer size and latencies only, do not call control methods from the callback. </td></tr>
    <tr><td class="paramname">buffer</td><td>The audio buffer containing input and/or output data, frame count and timestamp information. </td></tr>
    <tr><td class="paramname">user</td><td>The user data passed to XtDeviceOpenStream or XtServiceAggregateStream. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>must return 0.</dd></dl>
<p>The input/output buffers should be cast to the appropriate datatype for the format used to open the stream, e.g. (unsigned char*) for UInt8 and UInt24, (short*) for Int16, (int*) for Int32 and (float*) for Float32 interleaved access or (unsigned char**) for UInt8 and UInt24, (short**) for Int16, (int**) for Int32 and (float**) for Float32 non-interleaved access.</p>
<p>For regular streams, the number of input and output channels equal the channel counts specified in the format passed to XtDeviceOpenStream. For aggregate streams, the number of input and output channels is the sum of inputs and outputs passed in the channels array passed to XtServiceAggregateStream. The order of channels in the stream is the same as the order of devices and channels passed to XtServiceAggregateStream. For example, when opening a stream on 3 devices using (0 inputs, 2 outputs) on device 1, (2 inputs, 2 outputs) on device 2 and (2 inputs, 0 outputs) on device 3, the input channel order will be (device2:0, device2:1, device3:0, device3:1) and the output channel order will be (device1:0, device1:1, device2:0, device2:1).</p>
<p>The buffer callback will normally be called from a high priority thread. To prevent glitches the callback should not call any blocking methods (using locks, doing I/O etc). Note for languages that support exceptions: the buffer callback should NEVER throw. It is considered a fatal error if an exception propagates through the callback.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_callbacks_8h.html#abf92c83061232782c96cb174cc6d371d" title="Audio xrun (underrun/overrun) callback. ">XtOnXRun</a> </dd>
<dd>
<a class="el" href="struct_xt_stream_params.html" title="Shared parameters for regular and aggregate audio streams. ">XtStreamParams</a> </dd>
<dd>
<a class="el" href="_xt_device_8h.html#ae1e25aabd778b6a3e3572188072bcd4f" title="Opens an audio stream on the given device. ">XtDeviceOpenStream</a> </dd>
<dd>
<a class="el" href="struct_xt_device_stream_params.html" title="Stream parameters specific to regular (non-aggregated) audio streams. ">XtDeviceStreamParams</a> </dd>
<dd>
<a class="el" href="struct_xt_aggregate_stream_params.html" title="Stream parameters specific to aggregated audio streams. ">XtAggregateStreamParams</a> </dd>
<dd>
<a class="el" href="_xt_service_8h.html#a0c01c9e99c5ad18509133f6ce3776b5b" title="Combines multiple audio devices into a single stream. ">XtServiceAggregateStream</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a42be5027944d8cafe4dfa81ef804f8c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* XtOnError)(char const *message)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error logging callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The log message.</td></tr>
  </table>
  </dd>
</dl>
<p>XT-Audio will call the application-defined logging callback (if one was supplied to XtAudioInit) on each error, whether fatal or not. This function may be called on any thread, implementations must ensure thread-safety.</p>
<p>Note for languages that support exceptions: the error callback should NEVER throw. It is considered a fatal error if an exception propagates through the callback.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="_xt_audio_8h.html#ac8761157a24a9aac8f76e6e1f58b487e" title="Set error logging callback. ">XtAudioSetOnError</a> </dd></dl>

</div>
</div>
<a class="anchor" id="af5ce06062300b5254c3d6960088a8f0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* XtOnRunning)(<a class="el" href="_shared_8h.html#a97e22e376753e79f83b1762628476d06">XtStream</a> const *stream, <a class="el" href="_shared_8h.html#a5ed28f2b663eb8722ae2dd4b7d8739b6">XtBool</a> running, <a class="el" href="_shared_8h.html#a4ae237bc463dfed7b5148dd0e9fa4c3c">XtError</a> error, void *user)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Audio stream state changed callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>the audio stream. </td></tr>
    <tr><td class="paramname">running</td><td>indicates whether the stream started (XtTrue) or stopped (XtFalse). </td></tr>
    <tr><td class="paramname">error</td><td>the error that caused the stream to stop, or 0 if the stop was application-initiated. </td></tr>
    <tr><td class="paramname">user</td><td>The user data passed to XtDeviceOpenStream or XtServiceAggregateStream.</td></tr>
  </table>
  </dd>
</dl>
<p>Applications may use this callback to detect when streams where stopped outside of their control (for example, JACK server stopped, WASAPI exclusive-mode stream took precedence, ALSA stream stopped because of xruns). XT-Audio makes a best effort to report stream stops initiated by the backend back to the application.</p>
<p>The running callback may be be called from a high priority thread. To prevent glitches the callback should not call any blocking methods (using locks, doing I/O etc). Note for languages that support exceptions: the running callback should NEVER throw. It is considered a fatal error if an exception propagates through the callback.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="struct_xt_stream_params.html" title="Shared parameters for regular and aggregate audio streams. ">XtStreamParams</a> </dd>
<dd>
<a class="el" href="_xt_stream_8h.html#a64bf478144d0a3c489afafb81666f840" title="Stops an audio stream. ">XtStreamStop</a> </dd>
<dd>
<a class="el" href="_xt_stream_8h.html#a09a8d14f60b8cefea2356bf9e1ae4f9d" title="Starts an audio stream. ">XtStreamStart</a> </dd>
<dd>
<a class="el" href="_xt_device_8h.html#ae1e25aabd778b6a3e3572188072bcd4f" title="Opens an audio stream on the given device. ">XtDeviceOpenStream</a> </dd>
<dd>
<a class="el" href="_xt_service_8h.html#a0c01c9e99c5ad18509133f6ce3776b5b" title="Combines multiple audio devices into a single stream. ">XtServiceAggregateStream</a> </dd></dl>

</div>
</div>
<a class="anchor" id="abf92c83061232782c96cb174cc6d371d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* XtOnXRun)(<a class="el" href="_shared_8h.html#a97e22e376753e79f83b1762628476d06">XtStream</a> const *stream, int32_t index, void *user)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Audio xrun (underrun/overrun) callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>the audio stream. </td></tr>
    <tr><td class="paramname">stream</td><td>index the stream index in case of aggregation. </td></tr>
    <tr><td class="paramname">user</td><td>The user data passed to XtDeviceOpenStream or XtServiceAggregateStream.</td></tr>
  </table>
  </dd>
</dl>
<p>The stream index will be -1 for regular and aggregate streams, or the device index passed to XtServiceAggregateStream for underlying streams of aggregate streams. When xruns regularly occur, applications should pick a larger buffer size when opening the stream to ensure glitch-free streaming. Also, some backends may stop the stream altogether when xruns repeatedly occur (this currently happens on ALSA).</p>
<p>XRuns will be reported for streams on all services that natively support xrun detection. In addition, XT-Audio may report xruns detected in internal infrastructure even for backends which do not support xrun detection.</p>
<p>Note for aggregate streams: xruns which occur during stream aggregation are always reported to the application regardless of whether the stream's service supports xrun detection (see XtServiceCaps). When an xrun occurs on one of the underlying streams, the callback is invoked using the index of the actual stream that caused the xrun.</p>
<p>The xrun callback will normally be called from a high priority thread. To prevent more glitches the callback should not call any blocking methods (using locks, doing I/O etc). Note for languages that support exceptions: the xrun callback should NEVER throw. It is considered a fatal error if an exception propagates through the callback.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="struct_xt_stream_params.html" title="Shared parameters for regular and aggregate audio streams. ">XtStreamParams</a> </dd>
<dd>
<a class="el" href="_callbacks_8h.html#a5812fb7a07d222587f2f51fa32ce2e07" title="Audio stream processing callback. ">XtOnBuffer</a> </dd>
<dd>
<a class="el" href="_xt_stream_8h.html#a09a8d14f60b8cefea2356bf9e1ae4f9d" title="Starts an audio stream. ">XtStreamStart</a> </dd>
<dd>
<a class="el" href="_xt_device_8h.html#ae1e25aabd778b6a3e3572188072bcd4f" title="Opens an audio stream on the given device. ">XtDeviceOpenStream</a> </dd>
<dd>
<a class="el" href="_xt_service_8h.html#aeeb2d542cccd4c6185ed0a2ab518dd84" title="Get service capabilities. ">XtServiceGetCapabilities</a> </dd>
<dd>
<a class="el" href="_xt_service_8h.html#a0c01c9e99c5ad18509133f6ce3776b5b" title="Combines multiple audio devices into a single stream. ">XtServiceAggregateStream</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
